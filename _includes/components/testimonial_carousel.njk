
{% macro carousel(sector="") %}
<script src="/scripts/carousel-prev-next.js?ver={{cache.buster}}"></script>

<noscript>
  {# XXX TODO: handle no script scenario #}
  {# hide the container with all testimonial slides and only show 4 randomized at each build #}
  <style type="text/css">
      .pagecontainer {display:none;}
  </style>
  <div class="noscriptmsg">
  You don't have javascript enabled.  Good luck with that.
  </div>
</noscript>

<section id="myCarousel"
         class="carousel"
         aria-roledescription="carousel"
         aria-label="Highlighted television shows">
  <div class="carousel-inner">
    <div class="controls">
      <button type="button"
              class="rotation pause"
              aria-label="Stop automatic slide show">
        <svg width="42"
             height="34"
             version="1.1"
             xmlns="http://www.w3.org/2000/svg">
          <rect class="background"
                x="2"
                y="2"
                rx="5"
                ry="5"
                width="38"
                height="24"></rect>
          <rect class="border"
                x="4"
                y="4"
                rx="5"
                ry="5"
                width="34"
                height="20"></rect>
          <polygon class="pause" points="17 8 17 20"></polygon>
          <polygon class="pause" points="24 8 24 20"></polygon>
          <polygon class="play" points="15 8 15 20 27 14"></polygon>
        </svg>
      </button>
      <button type="button"
              class="previous"
              aria-controls="myCarousel-items"
              aria-label="Previous Slide">
        <svg width="42"
             height="34"
             version="1.1"
             xmlns="http://www.w3.org/2000/svg">
          <rect class="background"
                x="2"
                y="2"
                rx="5"
                ry="5"
                width="38"
                height="24"></rect>
          <rect class="border"
                x="4"
                y="4"
                rx="5"
                ry="5"
                width="34"
                height="20"></rect>
          <polygon points="9 14 21 8 21 11 33 11 33 17 21 17 21 20"></polygon>
        </svg>
      </button>
      <button type="button"
              class="next"
              aria-controls="myCarousel-items"
              aria-label="Next Slide">
        <svg width="42"
             height="34"
             version="1.1"
             xmlns="http://www.w3.org/2000/svg">
          <rect class="background"
                x="2"
                y="2"
                rx="5"
                ry="5"
                width="38"
                height="24"></rect>
          <rect class="border"
                x="4"
                y="4"
                rx="5"
                ry="5"
                width="34"
                height="20"></rect>
          <polygon points="9 11 21 11 21 8 33 14 21 20 21 17 9 17"></polygon>
        </svg>
      </button>
    </div>
    <div id="myCarousel-items"
         class="carousel-items"
         aria-live="off">
      {% for testimonial in testimonials.responses | shuffle %}
        {% if (sector == "") or (testimonial.sector == sector) %}
          <div class="carousel-item active"
              role="group"
              aria-roledescription="slide"
              aria-label="1 of 6">
            <div class="testimonial">
                <p class="testimonial-quote">{{ testimonial.q1 }}</p>
                <p class="testimonial-name">
                  {% if testimonial.q2 %}
                    {{ testimonial.q2 }}
                    {% else %}
                      *****
                  {% endif %}
                  {% if testimonial.q5 %}
                  - {{ testimonial.q5 }}
                  {% endif %}
                  </p>
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</section>

{% endmacro %}

